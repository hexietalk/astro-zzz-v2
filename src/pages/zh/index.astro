---
import Layout from '~/layouts/PageLayout.astro';
import { getLangFromUrl, useTranslations } from '~/i18n/utils';


import Hero from '~/components/widgets/Hero.astro';
import Features from '~/components/widgets/Features.astro';
import Content from '~/components/widgets/Content.astro';
import BlogLatestPosts from '~/components/widgets/BlogLatestPosts.astro';
import FAQs from '~/components/widgets/FAQs.astro';
import CallToAction from '~/components/widgets/CallToAction.astro';
import Coupons from '~/components/widgets/Coupons.astro'; // 假设我们创建了这个新组件


const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

const metadata = {
  title: t('site.title'),
  ignoreTitleTemplate: true,
};
---

<Layout metadata={metadata}>
  <!-- Hero Widget ******************* -->

  <Hero
    actions={[
      {
        variant: 'primary',
        text: t('hero.action1'),
        href: '/characters',
        icon: 'tabler:users',
      },
      { text: t('hero.action2'), href: '#features' },
    ]}
    image={{ src: '~/assets/images/hero-image.png', alt: t('hero.imageAlt') }}
  >
    <Fragment slot="title">
      {t('hero.title')} <span class="text-accent dark:text-white highlight">{t('hero.highlightedTitle')}</span>
    </Fragment>

    <Fragment slot="subtitle">
      {t('hero.subtitle')}
    </Fragment>
  </Hero>

  <!-- Coupons Widget *************** -->

  <Coupons
    title={t('coupons.title')}
    coupons={[
      { code: 'NEWPLAYER2024', discount: '10%', expiry: '2024-08-01' },
      { code: 'SUMMERFUN', discount: '15%', expiry: '2024-09-30' },
    ]}
  />

  <!-- Features Widget *************** -->

  <Features
    id="features"
    tagline={t('features.tagline')}
    title={t('features.title')}
    subtitle={t('features.subtitle')}
    items={[
      {
        title: t('features.item1.title'),
        description: t('features.item1.description'),
        icon: 'tabler:users',
      },
      {
        title: t('features.item2.title'),
        description: t('features.item2.description'),
        icon: 'tabler:rocket',
      },
      {
        title: t('features.item3.title'),
        description: t('features.item3.description'),
        icon: 'tabler:photo',
      },
      {
        title: t('features.item4.title'),
        description: t('features.item4.description'),
        icon: 'tabler:news',
      },
    ]}
  />

  <!-- Content Widget **************** -->

  <Content
    isReversed
    tagline={t('content.tagline')}
    title={t('content.title')}
    items={[
      {
        title: t('content.item1.title'),
        description: t('content.item1.description'),
      },
      {
        title: t('content.item2.title'),
        description: t('content.item2.description'),
      },
      {
        title: t('content.item3.title'),
        description: t('content.item3.description'),
      },
    ]}
    image={{
      src: '~/assets/images/game-screenshot.png',
      alt: t('content.imageAlt'),
    }}
  >
    <Fragment slot="content">
      {t('content.description')}
    </Fragment>
  </Content>

  <!-- BlogLatestPosts Widget ******* -->

  <BlogLatestPosts
    title={t('blog.title')}
    information={t('blog.information')}
  />

  <!-- FAQs Widget ******************* -->

  <FAQs
    title={t('faq.title')}
    subtitle={t('faq.subtitle')}
    tagline={t('faq.tagline')}
    items={[
      {
        title: t('faq.item1.question'),
        description: t('faq.item1.answer'),
      },
      {
        title: t('faq.item2.question'),
        description: t('faq.item2.answer'),
      },
      {
        title: t('faq.item3.question'),
        description: t('faq.item3.answer'),
      },
    ]}
  />

  <!-- CallToAction Widget *********** -->

  <CallToAction
    actions={[
      {
        variant: 'primary',
        text: t('cta.action'),
        href: '/signup',
        icon: 'tabler:user-plus',
      },
    ]}
  >
    <Fragment slot="title">
      {t('cta.title')}
    </Fragment>

    <Fragment slot="subtitle">
      {t('cta.subtitle')}
    </Fragment>
  </CallToAction>
</Layout>